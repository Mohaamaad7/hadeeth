<?php

declare(strict_types=1);

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Hadith;

class HadithSharhSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $hadith = Hadith::first();
        
        if (!$hadith) {
            $this->command->warn('⚠️  لا توجد أحاديث في قاعدة البيانات.');
            return;
        }

        $hadith->update([
            'sharh_context' => 'الحديث يتحدث عن زيارة تأخرت من جبريل عليه السلام إلى النبي محمد صلى الله عليه وسلم، وعن سبب هذا التأخر، وهو وجود ثلاثة أشياء في البيت كانت مانعاً للملك من الدخول. ثم يُبيّن جبريلُ للنبي صلى الله عليه وسلم ما يجب فعله لإزالة هذا المانع.',
            
            'sharh_obstacles' => [
                [
                    'title' => 'تمثال الرجال',
                    'description' => 'هو صورة مجسَّدة (تمثال) لرجل، وكان موجوداً على باب البيت. هذا يشمل كل ما له روح وقد جُسِّد كاملاً.'
                ],
                [
                    'title' => 'قِرامُ سترٍ فيه تماثيل',
                    'description' => 'القِرام هو الستر الرقيق أو الثوب الموشَّى (المزخرف) المُعلَّق، وكان هذا الستر يحتوي على صور (رسومات) لذوات الأرواح.'
                ],
                [
                    'title' => 'كلبٌ',
                    'description' => 'وجود كلب داخل البيت. والكلب المذكور هنا هو الذي لا يُقتنى لحاجة كالصيد أو الحراسة.'
                ]
            ],
            
            'sharh_commands' => [
                [
                    'title' => 'التمثال (المجسَّم)',
                    'ruling' => 'فليُقطعْ فيصيَّر كَهَيئةِ الشَّجرَةِ',
                    'explanation' => 'بقطع الرأس يزول التحريم ويصبح كالجماد أو الشجر.'
                ],
                [
                    'title' => 'الستر المصوَّر',
                    'ruling' => 'يُجعل منه وسادتين منتبذتين',
                    'explanation' => 'بجعل الصورة مُمتهَنة (مذلولة) كوسادة، يزول التحريم.'
                ],
                [
                    'title' => 'الكلب',
                    'ruling' => 'فيُخرَجُ',
                    'explanation' => 'لا يجوز اقتناء الكلاب داخل البيوت لغير حاجة شرعية.'
                ]
            ],
            
            'sharh_conclusion' => '• تحريم الصور والتماثيل لذوات الأرواح إذا كانت كاملة ومُعظَّمة.
• استثناء الصورة المقطوعة الرأس أو الناقصة حيث يزول التحريم.
• جواز اقتناء الصور المُمتهَنة (مثل الوسائد والمفروشات).
• منع اقتناء الكلاب في البيوت لغير حاجة معتبرة شرعاً.'
        ]);

        $this->command->info('✅ تم إضافة بيانات الشرح للحديث رقم ' . $hadith->id);
    }
}
