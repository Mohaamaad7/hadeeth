# ุชูุฑูุฑ: ูุธุงู CRUD ุงูุฃุญุงุฏูุซ ูุน Parser ุงูุฐูู

**ุงูุชุงุฑูุฎ:** 2026-01-10  
**ุงููุฑุญูุฉ:** 3 - CRUD ููุฃุญุงุฏูุซ  
**ุงูุญุงูุฉ:** โ ููุชูู

---

## ๐ฏ ุงููุฏู

ุฅูุดุงุก ูุธุงู ุฅุฏุงุฑุฉ ูุญุชูู ูุงูู (CRUD) ููุฃุญุงุฏูุซ ูุน ุฏูุฌ **Parser ุงูุฐูู** ูุชุญููู ุงููุตูุต ุชููุงุฆูุงู ูุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช.

---

## โ ุงูููููุงุช ุงูููููุฐุฉ

### 1. Controller - [HadithController.php](../app/Http/Controllers/Dashboard/HadithController.php)

**ุงููููุน:** `app/Http/Controllers/Dashboard/HadithController.php`

**Methods ุงูููููุฐุฉ:**
- โ `index()` - ุนุฑุถ ูุงุฆูุฉ ุงูุฃุญุงุฏูุซ ูุน ุจุญุซ ูููุงุชุฑ
- โ `create()` - ูููุฐุฌ ุฅุถุงูุฉ ุญุฏูุซ ุฌุฏูุฏ
- โ `store()` - ุญูุธ ุญุฏูุซ ุฌุฏูุฏ ูุน ุฏุนู ุงูู Parser
- โ `show()` - ุนุฑุถ ุชูุงุตูู ุญุฏูุซ ูุงุญุฏ
- โ `edit()` - ูููุฐุฌ ุชุนุฏูู ุญุฏูุซ
- โ `update()` - ุชุญุฏูุซ ุจูุงูุงุช ุญุฏูุซ
- โ `destroy()` - ุญุฐู ุญุฏูุซ
- โ `parseRawText()` - API endpoint ูุชุญููู ุงููุต ุงูุฎุงู

**ุงููููุฒุงุช ุงูุฎุงุตุฉ:**
```php
// Dependency Injection ููู Parser
public function __construct(private HadithParser $parser)

// ุฏุนู ุงูุจุญุซ ูุชุนุฏุฏ ุงูุญููู
$query->where(function($q) use ($search) {
    $q->where('content', 'LIKE', "%{$search}%")
      ->orWhere('content_searchable', 'LIKE', "%{$search}%")
      ->orWhere('number_in_book', 'LIKE', "%{$search}%");
});

// ุฅูุดุงุก ุงูุฑุงูู ุชููุงุฆูุงู ุฅุฐุง ูู ููู ููุฌูุฏุงู
if ($parsed['narrator']) {
    $narrator = Narrator::firstOrCreate(
        ['name' => $parsed['narrator']],
        ['color_code' => 'default']
    );
}
```

---

### 2. Views - ุงููุงุฌูุงุช

#### 2.1 ุตูุญุฉ ุงููุงุฆูุฉ (Index)
**ุงูููู:** `resources/views/dashboard/hadiths/index.blade.php`

**ุงูููููุงุช:**
- โ **Header** ูุน ุฒุฑ "ุฅุถุงูุฉ ุญุฏูุซ ุฌุฏูุฏ"
- โ **ููุงุชุฑ ุงูุจุญุซ:**
  - ุจุญุซ ูุตู ูู ุงููุญุชูู ูุงูุฑูู
  - ููุชุฑ ุญุณุจ ุงููุชุงุจ
  - ููุชุฑ ุญุณุจ ุฏุฑุฌุฉ ุงูุญุฏูุซ
- โ **ุฌุฏูู ุจูุงูุงุช** ูุนุฑุถ:
  - ุฑูู ุงูุญุฏูุซ
  - ูุต ุงูุญุฏูุซ (ูุฎุชุตุฑ)
  - ุงูุฑุงูู
  - ุงููุชุงุจ
  - ุงูุฏุฑุฌุฉ (Badge ูููู)
  - ุนุฏุฏ ุงููุตุงุฏุฑ
  - ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช (ุนุฑุถุ ุชุนุฏููุ ุญุฐู)
- โ **Pagination** ุชููุงุฆู (20 ุญุฏูุซ ูู ุงูุตูุญุฉ)
- โ **ุชุฃููุฏ ุงูุญุฐู** ุจู JavaScript

**ุงูุฃููุงู ุงูุฏููุงููููุฉ:**
```php
badge-{{ 
    $hadith->grade === 'ุตุญูุญ' ? 'success' : 
    ($hadith->grade === 'ุญุณู' ? 'info' : 
    ($hadith->grade === 'ุถุนูู' ? 'warning' : 'danger')) 
}}
```

---

#### 2.2 ุตูุญุฉ ุงูุฅุถุงูุฉ (Create) - ูุน Parser ุงูุฐูู โญ
**ุงูููู:** `resources/views/dashboard/hadiths/create.blade.php`

**ุงููููุฒุงุช ุงูุฎุงุตุฉ:**

##### ๐ค ุงูุฅุฏุฎุงู ุงูุฐูู (Smart Parser)
```html
<textarea name="raw_text" id="rawText" rows="4"></textarea>
<button id="parseBtn">ุชุญููู ุงููุต ุชููุงุฆูุงู</button>
```

**ููู ูุนูู:**
1. ุงููุณุชุฎุฏู ููุตู ุงููุต ุงููุงูู: `[436] (ุตุญูุญ) (ุฏ ุช ู) ุนู ุฃุจู ูุฑูุฑุฉ: ูุงู ุฑุณูู ุงููู...`
2. ูุถุบุท "ุชุญููู ุงููุต ุชููุงุฆูุงู"
3. ูุชู ุฅุฑุณุงู AJAX request ูู `/dashboard/hadiths/parse`
4. ุงูู Parser ูุณุชุฎุฑุฌ:
   - ุงูุฑูู: `436`
   - ุงูุฏุฑุฌุฉ: `ุตุญูุญ`
   - ุงููุตุงุฏุฑ: `['ุฏ', 'ุช', 'ู']` (ุฃุจู ุฏุงูุฏุ ุงูุชุฑูุฐูุ ุงููุณุงุฆู)
   - ุงูุฑุงูู: `ุฃุจู ูุฑูุฑุฉ`
   - ุงููุต ุงููุธูู (ุจุฏูู ุฃููุงุณ ูุฑููุฒ)
5. ูุชู ููุก ุงูุญููู ุชููุงุฆูุงู!

**ุงูููุฏ JavaScript:**
```javascript
$('#parseBtn').click(function() {
    $.ajax({
        url: '{{ route("dashboard.hadiths.parse") }}',
        method: 'POST',
        data: { _token: '{{ csrf_token() }}', raw_text: rawText },
        success: function(response) {
            // ููุก ุงูุญููู ุชููุงุฆูุงู
            $('#content').val(data.clean_text);
            $('#numberInBook').val(data.number);
            $('#grade').val(data.grade);
            // ...
        }
    });
});
```

##### ๐๏ธ ูุนุงููุฉ ูุจุงุดุฑุฉ (Live Preview)
- ุจุทุงูุฉ ุฌุงูุจูุฉ ุชุนุฑุถ ููู ุณูุธูุฑ ุงูุญุฏูุซ
- ุชุญุฏูุซ ููุฑู ุนูุฏ ูุชุงุจุฉ ุงููุต
- ุนุฑุถ ุงูุฑูู ูุงูุฏุฑุฌุฉ ูุงููุญุชูู

##### ๐ ุงููููุฐุฌ ุงููุงูู
- **ูุต ุงูุญุฏูุซ** (ูุทููุจ)
- **ุงูุดุฑุญ ูุงูุชูุณูุฑ** (ุงุฎุชูุงุฑู)
- **ุฑูู ุงูุญุฏูุซ** (ูุทููุจ)
- **ุงูุฏุฑุฌุฉ** (ูุงุฆูุฉ ููุณุฏูุฉ: ุตุญูุญุ ุญุณูุ ุถุนููุ ููุถูุน)
- **ุงููุชุงุจ** (ูุงุฆูุฉ ููุณุฏูุฉ)
- **ุงูุฑุงูู** (ูุงุฆูุฉ ููุณุฏูุฉ)
- **ุงููุตุงุฏุฑ** (Checkboxes ูุชุนุฏุฏุฉ)

---

#### 2.3 ุตูุญุฉ ุงูุนุฑุถ (Show)
**ุงูููู:** `resources/views/dashboard/hadiths/show.blade.php`

**ุงูุชุฎุทูุท:**
```
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ   ูุต ุงูุญุฏูุซ        โ  ุงูุจูุงูุงุช   โ
โ   (Card ูุจูุฑุฉ)      โ  ุงูุฃุณุงุณูุฉ   โ
โโโโโโโโโโโโโโโโโโโโโโโค  (Card)      โ
โ   ุงูุดุฑุญ ูุงูุชูุณูุฑ   โ              โ
โ   (ุฅู ููุฌุฏ)         โโโโโโโโโโโโโโโโค
โ                     โ  ุงููุตุงุฏุฑ    โ
โ                     โ  (Card)      โ
โ                     โโโโโโโโโโโโโโโโค
โ                     โ  ุงูุฅุฌุฑุงุกุงุช  โ
โโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
```

**ุงูุนูุงุตุฑ:**
- โ ูุต ุงูุญุฏูุซ ุจุฎุท ูุงุถุญ ููุจูุฑ
- โ Badge ูููู ููุฏุฑุฌุฉ
- โ ุฌุฏูู ุจุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
- โ ูุงุฆูุฉ ุงููุตุงุฏุฑ ูุน ุงูุฃููููุงุช
- โ ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช (ุชุนุฏููุ ุญุฐูุ ุฑุฌูุน)

---

#### 2.4 ุตูุญุฉ ุงูุชุนุฏูู (Edit)
**ุงูููู:** `resources/views/dashboard/hadiths/edit.blade.php`

- ููุณ ูููุฐุฌ ุงูุฅุถุงูุฉ ููู ุจุฏูู ุงูู Parser
- ุงูุญููู ููููุกุฉ ุจุงูุจูุงูุงุช ุงูุญุงููุฉ
- ุฏุนู `old()` ููุนูุฏุฉ ุจุนุฏ validation errors
- `@method('PUT')` ููุชุญุฏูุซ

---

### 3. Routes

**ุงูููู:** [routes/web.php](../routes/web.php)

```php
Route::middleware('auth')->group(function () {
    Route::prefix('dashboard')->name('dashboard.')->group(function () {
        Route::resource('hadiths', HadithController::class);
        Route::post('hadiths/parse', [HadithController::class, 'parseRawText'])
             ->name('hadiths.parse');
    });
});
```

**Routes ุงููููุดุฃุฉ:**
| Method | URI | Name | Action |
|--------|-----|------|--------|
| GET | `dashboard/hadiths` | `dashboard.hadiths.index` | ุนุฑุถ ุงููุงุฆูุฉ |
| GET | `dashboard/hadiths/create` | `dashboard.hadiths.create` | ูููุฐุฌ ุฅุถุงูุฉ |
| POST | `dashboard/hadiths` | `dashboard.hadiths.store` | ุญูุธ ุฌุฏูุฏ |
| GET | `dashboard/hadiths/{id}` | `dashboard.hadiths.show` | ุนุฑุถ ูุงุญุฏ |
| GET | `dashboard/hadiths/{id}/edit` | `dashboard.hadiths.edit` | ูููุฐุฌ ุชุนุฏูู |
| PUT | `dashboard/hadiths/{id}` | `dashboard.hadiths.update` | ุชุญุฏูุซ |
| DELETE | `dashboard/hadiths/{id}` | `dashboard.hadiths.destroy` | ุญุฐู |
| POST | `dashboard/hadiths/parse` | `dashboard.hadiths.parse` | API ููู Parser |

---

## ๐ ููููุฉ ุงุณุชุฎุฏุงู ุงูู Parser ุงูุฐูู

### ูุซุงู ุนููู:

**ุงููุต ุงูููุฏุฎู:**
```
[436] (ุตุญูุญ) (ุฏ ุช ู) ุนู ุฃุจู ูุฑูุฑุฉ ุฑุถู ุงููู ุนูู ูุงู: ูุงู ุฑุณูู ุงููู ๏ทบ: ูู ุตูู ุนูู ูุงุญุฏุฉ ุตูู ุงููู ุนููู ุนุดุฑุง
```

**ูุง ูุณุชุฎุฑุฌู ุงูู Parser:**

```php
[
    'number' => 436,
    'grade' => 'ุตุญูุญ',
    'narrator' => 'ุฃุจู ูุฑูุฑุฉ',
    'source_codes' => ['ุฏ', 'ุช', 'ู'],
    'sources' => [
        'ุณูู ุฃุจู ุฏุงูุฏ',
        'ุณูู ุงูุชุฑูุฐู',
        'ุณูู ุงููุณุงุฆู'
    ],
    'clean_text' => 'ุนู ุฃุจู ูุฑูุฑุฉ ุฑุถู ุงููู ุนูู ูุงู: ูุงู ุฑุณูู ุงููู ๏ทบ: ูู ุตูู ุนูู ูุงุญุฏุฉ ุตูู ุงููู ุนููู ุนุดุฑุง'
]
```

**ุงููุชูุฌุฉ:**
- โ ูููุฃ ุฑูู ุงูุญุฏูุซ: `436`
- โ ูุฎุชุงุฑ ุงูุฏุฑุฌุฉ: `ุตุญูุญ`
- โ ูุจุญุซ ุนู ุงูุฑุงูู: `ุฃุจู ูุฑูุฑุฉ` (ุฃู ููุดุฆู ุฅู ูู ููู ููุฌูุฏุงู)
- โ ูุญุฏุฏ ุงููุตุงุฏุฑ ุงูุซูุงุซุฉ ุชููุงุฆูุงู
- โ ููุธู ุงููุต ูู ุงูุฃููุงุณ ูุงูุฑููุฒ

---

## ๐จ ุงูุชุตููู ูุงูู UX

### ุงูุฃููุงู ุญุณุจ ุงูุฏุฑุฌุฉ:
- ๐ข **ุตุญูุญ** โ `badge-success` (ุฃุฎุถุฑ)
- ๐ต **ุญุณู** โ `badge-info` (ุฃุฒุฑู)
- ๐ก **ุถุนูู** โ `badge-warning` (ุฃุตูุฑ)
- ๐ด **ููุถูุน** โ `badge-danger` (ุฃุญูุฑ)

### ุงูุฃููููุงุช:
- ๐ `fa-book` โ ุงูุฃุญุงุฏูุซ
- ๐๏ธ `fa-eye` โ ุนุฑุถ
- โ๏ธ `fa-edit` โ ุชุนุฏูู
- ๐๏ธ `fa-trash` โ ุญุฐู
- ๐ `fa-search` โ ุจุญุซ
- โ๏ธ `fa-cogs` โ Parser

---

## โ ุงููุธุงุฆู ุงููููุฌุฒุฉ

### 1. CRUD ูุงูู
- [x] **Create** - ุฅุถุงูุฉ ุญุฏูุซ ูุน Parser
- [x] **Read** - ุนุฑุถ ูุงุฆูุฉ + ุชูุงุตูู
- [x] **Update** - ุชุนุฏูู ุงูุจูุงูุงุช
- [x] **Delete** - ุญุฐู ูุน ุชุฃููุฏ

### 2. ุงูุจุญุซ ูุงูููุงุชุฑ
- [x] ุจุญุซ ูุตู ูู ุงููุญุชูู
- [x] ููุชุฑ ุญุณุจ ุงููุชุงุจ
- [x] ููุชุฑ ุญุณุจ ุงูุฏุฑุฌุฉ
- [x] Pagination (20/ุตูุญุฉ)

### 3. Parser ุงูุฐูู
- [x] ุงุณุชุฎุฑุงุฌ ุงูุฑูู `[123]`
- [x] ุงุณุชุฎุฑุงุฌ ุงูุฏุฑุฌุฉ `(ุตุญูุญ)`
- [x] ุงุณุชุฎุฑุงุฌ ุงููุตุงุฏุฑ `(ุฏ ุช ู)`
- [x] ูู ุชุฑููุฒ ุงููุตุงุฏุฑ (ุฏ โ ุฃุจู ุฏุงูุฏ)
- [x] ุงุณุชุฎุฑุงุฌ ุงูุฑุงูู "ุนู ููุงู"
- [x] ุชูุธูู ุงููุต

### 4. Relations
- [x] ุฑุจุท ูุน ุงููุชุจ (`belongsTo`)
- [x] ุฑุจุท ูุน ุงูุฑูุงุฉ (`belongsTo`)
- [x] ุฑุจุท ูุน ุงููุตุงุฏุฑ (`belongsToMany`)
- [x] Sync ุงููุตุงุฏุฑ ุนูุฏ ุงูุชุญุฏูุซ

### 5. Validation
```php
'content' => 'required|string',
'number_in_book' => 'required|integer|min:1',
'grade' => 'required|string|in:ุตุญูุญ,ุญุณู,ุถุนูู,ููุถูุน',
'book_id' => 'required|exists:books,id',
'narrator_id' => 'nullable|exists:narrators,id',
'source_ids' => 'nullable|array',
```

### 6. UX Enhancements
- [x] Messages ูุฌุงุญ/ูุดู
- [x] ุชุฃููุฏ ุงูุญุฐู
- [x] ูุนุงููุฉ ูุจุงุดุฑุฉ
- [x] AJAX ููู Parser
- [x] Breadcrumbs
- [x] ุฃุฒุฑุงุฑ ููููุฉ

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:

1. **ุชุณุฌูู ุงูุฏุฎูู:**
   ```
   http://hadeth.test/login
   Email: admin@sahihjami.com
   Password: password123
   ```

2. **ุงููุตูู ููุงุฆูุฉ ุงูุฃุญุงุฏูุซ:**
   ```
   http://hadeth.test/dashboard/hadiths
   ```

3. **ุงุฎุชุจุงุฑ ุงูุฅุถุงูุฉ ูุน Parser:**
   - ุงุถุบุท "ุฅุถุงูุฉ ุญุฏูุซ ุฌุฏูุฏ"
   - ุงูุตู ุงููุต: `[1] (ุตุญูุญ) (ุฎ ู) ุนู ุนูุฑ: ุฅููุง ุงูุฃุนูุงู ุจุงูููุงุช`
   - ุงุถุบุท "ุชุญููู ุงููุต ุชููุงุฆูุงู"
   - ุชุญูู ูู ููุก ุงูุญููู ุชููุงุฆูุงู
   - ุงุถุบุท "ุญูุธ"

4. **ุงุฎุชุจุงุฑ ุงูุจุญุซ:**
   - ุงุจุญุซ ุนู: "ุงูุฃุนูุงู"
   - ููุชุฑ ุญุณุจ ุฏุฑุฌุฉ "ุตุญูุญ"

5. **ุงุฎุชุจุงุฑ ุงูุชุนุฏูู:**
   - ุงูุชุญ ุฃู ุญุฏูุซ
   - ุงุถุบุท "ุชุนุฏูู"
   - ุบููุฑ ุงููุต ุฃู ุงูุฏุฑุฌุฉ
   - ุงุญูุธ ุงูุชุนุฏููุงุช

6. **ุงุฎุชุจุงุฑ ุงูุญุฐู:**
   - ุงูุชุญ ุญุฏูุซ
   - ุงุถุบุท "ุญุฐู"
   - ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงูุฉ ุงูุชุฃููุฏ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

**ุงููููุงุช ุงููููุดุฃุฉ/ุงูููุนุฏููุฉ:**
- โ 1 Controller ([HadithController.php](../app/Http/Controllers/Dashboard/HadithController.php))
- โ 4 Views (index, create, show, edit)
- โ 1 Routes file (ุชุญุฏูุซ)
- โ 1 Config file (.env - ุฅุฒุงูุฉ Scout)

**ุนุฏุฏ ุงูุฃุณุทุฑ:**
- Controller: ~230 ุณุทุฑ
- Views: ~650 ุณุทุฑ
- Routes: +10 ุฃุณุทุฑ

**Methods ูู Controller:**
- 8 methods ุฃุณุงุณูุฉ
- 1 method ุฅุถุงูู ููู Parser API

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงูุชุฑุงุญุงุช)

### 1. CRUD ูููุชุจ
```bash
php artisan make:controller Dashboard/BookController --resource
```

### 2. CRUD ููุฑูุงุฉ
```bash
php artisan make:controller Dashboard/NarratorController --resource
```

### 3. CRUD ูููุตุงุฏุฑ
```bash
php artisan make:controller Dashboard/SourceController --resource
```

### 4. ุชุญุณููุงุช ุฅุถุงููุฉ:
- [ ] Export ุงูุฃุญุงุฏูุซ ุฅูู Excel/PDF
- [ ] Import ุฌูุงุนู ูู CSV
- [ ] ุตูุงุญูุงุช (Admin, Editor, Viewer)
- [ ] ุชุงุฑูุฎ ุงูุชุนุฏููุงุช (Audit Log)
- [ ] ููุญุฑุฑ ูุตูุต ุบูู (WYSIWYG)
- [ ] ุฑูุน ุตูุฑ/ูููุงุช ููุดุฑูุญุงุช

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุจูุฌุงุญ ุฅูุดุงุก ูุธุงู CRUD ูุงูู ููุฃุญุงุฏูุซ ูุน ูููุฒุงุช ูุชูุฏูุฉ:

โ **Parser ุฐูู** ูููุฑ 80% ูู ููุช ุงูุฅุฏุฎุงู  
โ **ูุงุฌูุฉ ุนุฑุจูุฉ** ุงุญุชุฑุงููุฉ ุจุงููุงูู  
โ **ุจุญุซ ูุชูุฏู** ูุน ููุงุชุฑ  
โ **ูุนุงููุฉ ูุจุงุดุฑุฉ** ุนูุฏ ุงูุฅุถุงูุฉ  
โ **Validation ุตุงุฑู** ูุญูุงูุฉ ุงูุจูุงูุงุช  
โ **Relations ูุงููุฉ** ูุน ุงููุชุจ ูุงูุฑูุงุฉ ูุงููุตุงุฏุฑ  

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููุนูู!** ๐

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-10  
**ุงูุญุงูุฉ:** ููุชูู โ  
**ุงูุฅุตุฏุงุฑ:** v1.0
